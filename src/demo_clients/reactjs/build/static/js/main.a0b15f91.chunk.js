(this.webpackJsonpNanoRPCProxyClient=this.webpackJsonpNanoRPCProxyClient||[]).push([[0],{40:function(e,t,a){e.exports=a(55)},45:function(e,t,a){},48:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(15),c=a.n(r),i=(a(45),a(46),a(13)),s=a.n(i),l=a(21),m=a(27),u=a(22),d=a(7),h=a(23),C=a(24),f=a(39),p=(a(48),a(28)),b=a(60),v=a(19),g=a(61),E=a(62),P=a(37),y={RPC_SERVER:"http://localhost:9950/proxy",RPC_LIMIT:"You have done too many RPC requests. Try again later.",RPC_CREDS:"user1:user1",SAMPLE_COMMANDS:['{"action":"block_count"}','{"action":"account_info","account":"nano_3t6k35gi95xu6tergt6p69ck76ogmitsa8mnijtpxm9fkcm736xtoncuohr3"}','{"action":"account_history", "account":"nano_3cpz7oh9qr5b7obbcb5867omqf8esix4sdd5w6mh8kkknamjgbnwrimxsaaf", "count":"20"}','{"action":"active_difficulty"}','{"action":"block_info","json_block":"true","hash":"87434F8041869A01C8F6F263B87972D7BA443A72E0A97D7A3FD0CCC2358FD6F9"}','{"action":"pending","account":"nano_1111111111111111111111111111111111111111111111111117353trpda","count": "5"}','{"action":"representatives_online"}'],SAMPLE_COMMAND_NAMES:["block_count","account_info","account_history","active_difficulty","block_info","pending","representatives_online"]},R=function(e){Object(h.a)(a,e);var t=Object(C.a)(a);function a(e){var n;Object(u.a)(this,a);for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return n=t.call.apply(t,[this].concat(r)),Error.captureStackTrace&&Error.captureStackTrace(Object(d.a)(n),a),n.name="RPCError",n.code=e,n}return a}(Object(f.a)(Error)),S=function(e){Object(h.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={command:"",output:"",fetchingRPC:!1,activeCommandId:0,activeCommandName:"Select a sample"},n.getRPC=n.getRPC.bind(Object(d.a)(n)),n.handleCommandChange=n.handleCommandChange.bind(Object(d.a)(n)),n.handleRPCError=n.handleRPCError.bind(Object(d.a)(n)),n.selectCommand=n.selectCommand.bind(Object(d.a)(n)),n}return Object(m.a)(a,[{key:"handleCommandChange",value:function(e){var t=e.target.value;this.setState({command:t})}},{key:"selectCommand",value:function(e){this.setState({command:y.SAMPLE_COMMANDS[e],activeCommandId:e,activeCommandName:y.SAMPLE_COMMAND_NAMES[e]})}},{key:"handleRPCError",value:function(e){this.setState({fetchingRPC:!1}),alert("Error: see console"),e.code?429===e.code?console.log(y.RPC_LIMIT):console.log("RPC request failed: "+e.message):console.log("RPC request failed: "+e)}},{key:"getRPC",value:function(e){var t=this;try{var a=JSON.parse(this.state.command)}catch(n){return void console.log("Could not parse json string")}Object.keys(a).length>0&&(this.setState({fetchingRPC:!0}),this.postData(a).then((function(e){t.setState({fetchingRPC:!1}),t.writeOutput(e)})).catch(function(e){this.handleRPCError(e)}.bind(this)))}},{key:"writeOutput",value:function(e){try{this.setState({output:JSON.stringify(e,null,2)})}catch(t){console.log("Bad JSON: "+t)}}},{key:"postData",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a,n,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},a=o.length>1&&void 0!==o[1]?o[1]:y.RPC_SERVER,n=!1,e.abrupt("return",new Promise((function(e,o){var r=setTimeout((function(){n=!0,o(new Error("Request timed out"))}),1e4);fetch(a,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Basic "+p.Base64.encode(y.RPC_CREDS)},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)}).then((function(t){if(clearTimeout(r),!n){if(200!==t.status)throw new R(t.status,e(t));e(t)}})).catch((function(e){n||o(e)}))})).then(function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("h3",null,"RPC demo client for communicating with ",o.a.createElement("a",{href:"https://github.com/Joohansson/NanoRPCProxy"},"NanoRPCProxy")),o.a.createElement("p",null,"Send to a live Nano node using RPC json requests",o.a.createElement("br",null),"See ",o.a.createElement("a",{href:"https://docs.nano.org/commands/rpc-protocol/"},"documentation")," for more commands",o.a.createElement("br",null)),o.a.createElement(b.a,{className:"command-dropdown",title:this.state.activeCommandName,key:this.state.activeCommandId,id:"dropdown-basic-".concat(this.state.activeCommandId)},y.SAMPLE_COMMAND_NAMES.map(function(e,t){return o.a.createElement(v.a.Item,{eventKey:t,key:t,onSelect:this.selectCommand},e)}.bind(this))),o.a.createElement(g.a,{size:"sm",className:"mb-3"},o.a.createElement(g.a.Prepend,null,o.a.createElement(g.a.Text,{id:"command"},"RPC Command")),o.a.createElement(E.a,{id:"command","aria-describedby":"command",value:this.state.command,title:"",maxLength:"200",placeholder:"RPC command",onChange:this.handleCommandChange,autoComplete:"off"})),o.a.createElement(g.a,{size:"sm",className:"mb-3"},o.a.createElement(P.a,{className:"btn-medium",variant:"primary",disabled:this.state.fetchingRPC,onClick:this.getRPC},"Node Request")),o.a.createElement(g.a,{size:"sm",className:"mb-3"},o.a.createElement(E.a,{id:"output-area","aria-describedby":"output",as:"textarea",rows:"15",placeholder:"",value:this.state.output,readOnly:!0}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.a0b15f91.chunk.js.map