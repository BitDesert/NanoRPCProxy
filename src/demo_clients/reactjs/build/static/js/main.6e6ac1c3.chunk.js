(this.webpackJsonpNanoRPCProxyClient=this.webpackJsonpNanoRPCProxyClient||[]).push([[0],{21:function(e,a,t){e.exports=t(36)},26:function(e,a,t){},29:function(e,a,t){},36:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(16),c=t.n(o),s=(t(26),t(27),t(8)),i=t.n(s),l=t(10),m=t(17),u=t(11),h=t(5),d=t(12),p=t(14),C=t(20),f=(t(29),t(18)),b=t(40),v=t(39),g=t(38),E={RPC_SERVER:"http://localhost:9950/proxy",RPC_LIMIT:"You have done too many RPC requests. Try again later.",RPC_CREDS:"user1:user1",SAMPLE_COMMANDS:['{"action":"block_count"}','{"action":"account_info","account":"nano_3t6k35gi95xu6tergt6p69ck76ogmitsa8mnijtpxm9fkcm736xtoncuohr3"}','{"action":"account_history", "account":"nano_3cpz7oh9qr5b7obbcb5867omqf8esix4sdd5w6mh8kkknamjgbnwrimxsaaf", "count":"20"}','{"action":"active_difficulty"}','{"action":"block_info","json_block":"true","hash":"87434F8041869A01C8F6F263B87972D7BA443A72E0A97D7A3FD0CCC2358FD6F9"}','{"action":"pending","account":"nano_1111111111111111111111111111111111111111111111111117353trpda","count": "5"}','{"action":"representatives_online"}']},P=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(e){var n;Object(u.a)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];return n=a.call.apply(a,[this].concat(o)),Error.captureStackTrace&&Error.captureStackTrace(Object(h.a)(n),t),n.name="RPCError",n.code=e,n}return t}(Object(C.a)(Error)),y=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(u.a)(this,t),(n=a.call(this,e)).state={command:"",output:"",fetchingRPC:!1},n.getRPC=n.getRPC.bind(Object(h.a)(n)),n.sample=n.sample.bind(Object(h.a)(n)),n.handleCommandChange=n.handleCommandChange.bind(Object(h.a)(n)),n.handleRPCError=n.handleRPCError.bind(Object(h.a)(n)),n}return Object(m.a)(t,[{key:"handleCommandChange",value:function(e){var a=e.target.value;this.setState({command:a})}},{key:"sample",value:function(e){this.setState({command:E.SAMPLE_COMMANDS[e.target.value]})}},{key:"handleRPCError",value:function(e){this.setState({fetchingRPC:!1}),alert("Error: see console"),e.code?429===e.code?console.log(E.RPC_LIMIT):console.log("RPC request failed: "+e.message):console.log("RPC request failed: "+e)}},{key:"getRPC",value:function(e){var a=this;try{var t=JSON.parse(this.state.command)}catch(n){return void console.log("Could not parse json string")}Object.keys(t).length>0&&(this.setState({fetchingRPC:!0}),this.postData(t).then((function(e){a.setState({fetchingRPC:!1}),a.writeOutput(e)})).catch(function(e){this.handleRPCError(e)}.bind(this)))}},{key:"writeOutput",value:function(e){try{this.setState({output:JSON.stringify(e,null,2)})}catch(a){console.log("Bad JSON: "+a)}}},{key:"postData",value:function(){var e=Object(l.a)(i.a.mark((function e(){var a,t,n,r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:{},t=r.length>1&&void 0!==r[1]?r[1]:E.RPC_SERVER,n=!1,e.abrupt("return",new Promise((function(e,r){var o=setTimeout((function(){n=!0,r(new Error("Request timed out"))}),1e4);fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Basic "+f.Base64.encode(E.RPC_CREDS)},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(a)}).then((function(a){if(clearTimeout(o),!n){if(200!==a.status)throw new P(a.status,"HTTP status "+a.status);e(a)}})).catch((function(e){n||r(e)}))})).then(function(){var e=Object(l.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h3",null,"RPC demo client for communicating with ",r.a.createElement("a",{href:"https://github.com/Joohansson/NanoRPCProxy"},"NanoRPCProxy")),r.a.createElement("p",null,"Send to a live Nano node using RPC json requests",r.a.createElement("br",null),"See ",r.a.createElement("a",{href:"https://docs.nano.org/commands/rpc-protocol/"},"documentation")," for more commands",r.a.createElement("br",null)),r.a.createElement(b.a,{size:"sm",className:"mb-3"},r.a.createElement(b.a.Prepend,null,r.a.createElement(b.a.Text,{id:"command"},"RPC Command")),r.a.createElement(v.a,{id:"command","aria-describedby":"command",value:this.state.command,title:"",maxLength:"200",placeholder:"RPC command",onChange:this.handleCommandChange,autoComplete:"off"})),r.a.createElement(b.a,{size:"sm",className:"mb-3"},r.a.createElement(v.a,{id:"output-area","aria-describedby":"output",as:"textarea",rows:"15",placeholder:"",value:this.state.output,readOnly:!0})),r.a.createElement(b.a,{size:"sm",className:"mb-3"},r.a.createElement(g.a,{className:"btn-small",variant:"primary",value:"0",onClick:this.sample},"Sample1"),r.a.createElement(g.a,{className:"btn-small",variant:"primary",value:"1",onClick:this.sample},"Sample2"),r.a.createElement(g.a,{className:"btn-small",variant:"primary",value:"2",onClick:this.sample},"Sample3"),r.a.createElement(g.a,{className:"btn-small",variant:"primary",value:"3",onClick:this.sample},"Sample4"),r.a.createElement(g.a,{className:"btn-small",variant:"primary",value:"4",onClick:this.sample},"Sample5"),r.a.createElement(g.a,{className:"btn-small",variant:"primary",value:"5",onClick:this.sample},"Sample6"),r.a.createElement(g.a,{className:"btn-small",variant:"primary",value:"6",onClick:this.sample},"Sample7"),r.a.createElement(g.a,{className:"btn-medium",variant:"primary",disabled:this.state.fetchingRPC,onClick:this.getRPC},"Node Request"))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.6e6ac1c3.chunk.js.map